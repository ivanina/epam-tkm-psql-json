<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test page</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        var tkmFbUser = {};
        var tkmFbLoginButtonText = ["Load...","Login","Logged as "]
        jQuery.noConflict();
        jQuery(document).ready(function ($) {
            var tkmFbUser = {};
            var tkmFbLoginButton =  $(".tkm-fb-login-button");
            tkmFbLoginButton.html(tkmFbLoginButtonText[0]);
            $.ajax({
                method: "POST",
                url: "/api/fb/authentication",
                data: { },
                cache: false,
                dataType: "json"
            }).done(function (data) {
                console.log(data);
                tkmFbUser = data;
                if(data.firstName){
                    tkmFbLoginButton.removeClass("loaded").addClass("logged").html(tkmFbLoginButtonText[2]+data.firstName);
                }else{
                    tkmFbLoginButton.removeClass("loaded").addClass("not-logged").html(tkmFbLoginButtonText[1]);
                }
            });
            $(".tkm-fb-login-button").click(function () {
                if(!tkmFbUser.id){
                    $('<form method="POST" action="/connect/facebook" ><input type="hidden" name="scope" value="read_stream" /></form>')
                        .appendTo('body').submit();
                }
            });
        });

    </script>
</head>
<body>
<div class="tkm-fb-login-button loaded">...</div>

</body>
</html>